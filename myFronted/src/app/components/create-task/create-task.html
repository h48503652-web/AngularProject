<div class="create-task-container">
  <div class="form-header">
    <div class="icon-wrapper">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg>
    </div>
    <div>
      <h3>משימה חדשה</h3>
      <p>הגדר את הצעד הבא לקראת היעד</p>
    </div>
  </div>

  <form [formGroup]="taskForm" (ngSubmit)="createTask()">
    <div class="input-group">
      <label>שיוך לפרויקט</label>
      <div class="select-wrapper">
        <select formControlName="projectId">
          <option value="" disabled selected>בחר פרויקט...</option>
          @for ( project of projects() ; track project.id) {
            <option [value]="project.id">{{ project.name }}</option>
          }
        </select>
      </div>
    </div>

    <div class="input-group">
      <label>מה צריך לעשות?</label>
      <div class="input-field-wrapper">
        <input type="text" formControlName="title" placeholder="כותרת קצרה וברורה...">
      </div>
    </div>

    <div class="input-group">
      <label>פרטים נוספים</label>
      <div class="input-field-wrapper">
        <textarea formControlName="description" rows="3" placeholder="הסבר קצר על המשימה..."></textarea>
      </div>
    </div>

    <div class="input-group">
      <label>סטטוס</label>
      <div class="select-wrapper">
        <select formControlName="status">
          <option value="todo">todo</option>
          <option value="in_progress">in_progress</option>
          <option value="done">done</option>
        </select>
      </div>
    </div>

    <div class="input-group">
      <label>עדיפות</label>
      <div class="select-wrapper">
        <select formControlName="priority">
          <option value="low">low</option>
          <option value="normal">normal</option>
          <option value="high">high</option>
        </select>
      </div>
    </div>
    
    <div class="actions">
      <button type="button" class="btn-secondary" (click)="close.emit()">ביטול</button>
      <button type="submit" class="btn-primary" [disabled]="!taskForm.valid">
        <span>צור משימה</span>
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polyline points="20 6 9 17 4 12"></polyline></svg>
      </button>
    </div>
  </form>
</div>
